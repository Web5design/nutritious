{% load static %}
{% load less %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" 
    "http://www.w3.org/TR/html4/strict.dtd">
<html ng-app="myApp">
    <head>
        <title>{% block title %}Tagz{% endblock %}</title>
        <link rel="stylesheet" media="screen"
            href="{% static "lib/bootstrap/css/bootstrap.min.css" %}">
            <link rel="stylesheet" href="{{ STATIC_URL }}{% less "css/style.less" %}" />
        {% block extra_head %}{% endblock %}
    </head>
    <body ng-controller="BaseCtrl">
        <div class="container">
          <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
              <ul class="nav">
                <li><a id="home-link" href="{% url home %}">Home</a></li>
                <li><a id="lib-link" href="{% url library %}">Library</a></li>
                <li><a id="tags-link" href="{% url tags %}">Tags</a></li>
                <li class="dropdown">
                  <a id="tools-link" href="#" class="dropdown-toggle" 
                     data-toggle="dropdown">Tools
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a id="import-link" href="{% url tags_import %}">Import tags</a></li>
                    <li><a id="export-link" href="{% url tags_export %}">Export tags</a></li>
                  </ul>
                </li>
                <li class="log-in-out">
                  {% if user.is_authenticated %}
                    <a href="{% url logout %}" tooltip="'Logged in as {{ user.username }}'">Logout</a>
                  {% else %}
                    <a href="{% url login %}">Login</a>
                  {% endif %}
                </li>
              </ul>

              <!-- Search input -->
              <!-- probably bad to reference this scope; what to do
                   when this is not available? -->
              <form action="
                {% if resource_name %}
                  {% url library %}{{ resource_name }}/{{ sub_ref }}
                {% else %}
                  {% url library %}
                {% endif %}"
                   method="get" class="navbar-search pull-right">
                <input id="search-input" class="search-query input-medium" 
                       type="text" name="q" 
                      placeholder="enter query, ref, or #tag"/>
                <input id="search-submit" type="submit">
              </form>
            </div>
          </div>

          <div class="content">
            {% block main_content %} {% endblock %}
            {% block extra_body %}{% endblock %}
          </div>

        </div>

        <!-- footer outside -->
        <div class="footer-container">
          <div class="outside-footer">
            Protected by 
            <a href="{% static "test/e2e/runner.html" %}" target="_blank">
              <img src="{% static "img/angular.png" %}">
            </a>
          </div>
        </div>

        <!-- Import Tags Modal -->
        <div id="import-tags" class="modal hide fade">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Import Tags</h3>
          </div>
          <div class="modal-body">
            <p>Select input file: *.tsv</p>
            <div style="position:relative;">
              <a class='btn' href='javascript:;'>
                        Choose File...
                        <input type="file" style='position:absolute;z-index:2;top:0;left:0;filter: alpha(opacity=0);-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";opacity:0;background-color:transparent;color:transparent;' name="file_source" size="40"  onchange='$("#upload-file-info").html($(this).val());'>
                    </a>
                    &nbsp;
                    <span class='label label-info' id="upload-file-info"></span>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
          </div>
        </div>
        <!-- end Import Tags Modal -->

    </body>

    <script src="{% static "lib/jquery-1.9.0.min.js" %}"></script>
    <script src="{% static "lib/jquery-ui.js" %}"></script>
    <script src="{% static "lib/bootstrap/js/bootstrap.min.js" %}"></script>
    <script src="{% static "lib/purl.js" %}"></script>
    <script src="{% static "lib/angular/angular.js" %}"></script>
    <script src="{% static "js/angular/app.js" %}"></script>
    <script src="{% static "js/angular/services.js" %}"></script>
    <script src="{% static "js/angular/controllers.js" %}"></script>
    <script src="{% static "js/angular/filters.js" %}"></script>
    <script src="{% static "js/angular/directives.js" %}"></script>
</html>

